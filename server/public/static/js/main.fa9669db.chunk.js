/*! For license information please see main.fa9669db.chunk.js.LICENSE.txt */
(this["webpackJsonpnew-app-client"]=this["webpackJsonpnew-app-client"]||[]).push([[0],{45:function(e,t,a){},71:function(e,t,a){},73:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),s=a(15),r=a.n(s),i=(a(45),a(2)),l=a(4),o=a(3),u=a(18),j=a(0),d=["exact","to","path","component"],b=function(e){var t=e.exact,a=e.to,n=e.path,c=e.component,s=Object(u.a)(e,d),r=c;return Object(j.jsx)(o.b,{exact:t,path:n||a,render:function(e){return Object(j.jsx)(r,Object(i.a)(Object(i.a)({},s),e))}})},h="/auth/login",m=["user","exact","to","path","component"],O=function(e){var t=e.user,a=e.exact,n=e.to,c=e.path,s=e.component,r=Object(u.a)(e,m),l=s;return t?Object(j.jsx)(o.b,{exact:a,path:c||n,render:function(e){return Object(j.jsx)(l,Object(i.a)(Object(i.a)(Object(i.a)({},r),e),{},{user:t}))}}):Object(j.jsx)(o.a,{to:h})},p=a(17),x=(a(52),"access_token"),f="new-app",v=f[0].toUpperCase()+f.slice(1).toLowerCase(),g=a(8),N=a.n(g);function S(e){return{status:!1,errorMessage:"Internal server error. Please check your server"}}function y(e){return{status:!0,data:e.data}}var w=N.a.create({baseURL:"".concat("https://starsandstars.herokuapp.com/api","/auth")});var k=a(6),C=(a(71),function(e){return Object(j.jsxs)("nav",{children:[Object(j.jsxs)(k.b,{to:"/",className:"nav__projectName",children:[v," - created with IronLauncher"]}),Object(j.jsx)("div",{className:"nav__authLinks",children:e.user?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(k.b,{to:"/myconstellation",className:"authLink",children:"My Constellation"}),Object(j.jsx)("button",{className:"nav-logoutbtn",onClick:e.handleLogout,children:"Logout"})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(k.b,{to:"/auth/signup",className:"authLink",children:"Signup"}),Object(j.jsx)(k.b,{to:h,className:"authLink",children:"Log In"})]})})]})}),P=a(23),L=a.n(P),A=a(36),I=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)([]),r=Object(l.a)(s,2),i=r[0],o=r[1];Object(n.useEffect)((function(){var e=function(){var e=Object(A.a)(L.a.mark((function e(){var t,n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://en.wikipedia.org/w/api.php",{params:{action:"query",list:"search",origin:"*",format:"json",srsearch:a}});case 2:t=e.sent,n=t.data,o(n.query.search);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(!a||i.length){var t=setTimeout((function(){a&&e()}),500);return function(){clearTimeout(t)}}e()}),[a]);var u=i.slice(0,2).map((function(e){return Object(j.jsxs)("div",{className:"item",children:[Object(j.jsx)("div",{className:"content",children:Object(j.jsx)("div",{className:"header",children:e.title})}),Object(j.jsx)("span",{dangerouslySetInnerHTML:{__html:e.snippet}})]},e.pageid)}));return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"ui form",children:Object(j.jsxs)("div",{className:"field",children:[Object(j.jsx)("label",{children:"Search Term"}),Object(j.jsx)("input",{className:"input",value:a,onChange:function(e){return c(e.target.value)}}),Object(j.jsx)("button",{onClick:function(){o([]),c("")},children:"Clear"})]})}),Object(j.jsx)("div",{className:"ui celled list",children:u})]})};function E(e){var t=e.data;return console.log(e,"linea 8"),Object(j.jsxs)("div",{children:[t&&Object(j.jsxs)("div",{className:"img-detail",children:[Object(j.jsx)("img",{src:t.hdurl,alt:"today-img"}),Object(j.jsx)("div",{className:"detail-title",children:Object(j.jsx)("p",{className:"detail-title",children:t.title})}),Object(j.jsx)("div",{className:"detail-line-1",children:Object(j.jsx)("p",{className:"detail-explanation",children:t.explanation})}),Object(j.jsx)("div",{className:"detail-line-2",children:Object(j.jsx)("p",{className:"detail-tagline",children:t.date})})]}),Object(j.jsx)(I,{})]})}function _(e){return{status:!1,errorMessage:"Internal server error. Please check your server"}}function F(e){return{status:!0,data:e.data}}var T=N.a.create({baseURL:"".concat("https://starsandstars.herokuapp.com/api","/favorites")});function M(e,t){return T.put("/".concat(e),t).then(F).catch(_)}function q(e){var t,a=e.data;return console.log(a,"linea 11"),e.user&&(t=e.user._id),console.log(t),Object(j.jsx)("div",{children:Object(j.jsx)("button",{onClick:function(){M(t,a).then((function(e){console.log(e)}))},children:"Add to My Constellation"})})}var D=function(e){var t=e.data,a=e.user;return console.log(t,"me cago en react"),Object(j.jsxs)("div",{children:[t&&Object(j.jsxs)("div",{className:"header",children:[Object(j.jsx)("img",{className:"header-pic",src:"".concat(t.hdurl),alt:"pic of the day"}),Object(j.jsx)("button",{children:Object(j.jsx)(k.b,{to:"/daily-details",children:" Details "})})]}),Object(j.jsx)(q,{data:t,user:a})]})},U=(a(73),a(12));function H(e){var t=e.data,a=t.hdurl,c=t.url,s=t.title,r=t.explanation,o=t.date,u=e.user,d={},b=Object(n.useState)(d),h=Object(l.a)(b,2),m=h[0],O=h[1];function p(e){O(Object(i.a)(Object(i.a)({},m),{},Object(U.a)({},e.target.name,e.target.value)))}return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("img",{src:c,alt:"card-detail-img"}),Object(j.jsx)("div",{className:"detail-title",children:Object(j.jsx)("p",{className:"detail-title",children:s})}),Object(j.jsx)("div",{className:"detail-line-1",children:Object(j.jsx)("p",{className:"detail-explanation",children:r})}),Object(j.jsx)("div",{className:"detail-line-2",children:Object(j.jsx)("p",{className:"detail-tagline",children:o})})]}),u&&Object(j.jsx)("div",{children:Object(j.jsxs)("form",{className:"form-stars",onSubmit:function(e){e.preventDefault(),N.a.post("http://localhost:5005/api/favorites/send-star",Object(i.a)(Object(i.a)({},m),{},{hdurl:a,url:c})).then((function(e){return O(d)})).catch((function(e){return console.log(e)}))},children:[Object(j.jsx)("label",{htmlFor:"email",children:"Email"}),Object(j.jsx)("input",{value:m.email,type:"email",name:"email",id:"email",onChange:p}),Object(j.jsx)("label",{htmlFor:"message",children:"Message"}),Object(j.jsx)("textarea",{value:m.message,type:"text",name:"message",id:"message",onChange:p}),Object(j.jsx)("button",{className:"form-btn",type:"submit",children:"Send a Star"})]})}),Object(j.jsx)(I,{})]})}var G=a(39);a(74);function Y(e){var t,a=e.selectedPic;return e.user&&(t=e.user._id),console.log(t),Object(j.jsx)("div",{children:Object(j.jsx)("button",{onClick:function(){M(t,a).then((function(e){Object(p.b)("You added it!"),console.log(e)}))},children:"Add to My Constellation"})})}var R=function(e){var t=e.data,a=e.setSelectedPic,n=e.user;return Object(j.jsx)("div",{className:"gallery-container",children:t.map((function(e){return Object(j.jsxs)("div",{className:"gallery-div",children:[Object(j.jsx)(G.a,{children:Object(j.jsx)("img",{className:"gallery-img",src:e.url,alt:"card-detail-img"})}),Object(j.jsx)(k.b,{to:"/details",onClick:function(){return a(e)},children:Object(j.jsx)("p",{children:"See details"})}),n&&Object(j.jsx)(Y,{selectedPic:e,user:n})]})}))})};var W=function(e){var t=e.user,a={name:"",comment:""},c=Object(n.useState)(a),s=Object(l.a)(c,2),r=s[0],o=s[1];function u(e){var t=e.target,a=t.name,n=t.value;o(Object(i.a)(Object(i.a)({},r),{},Object(U.a)({},a,n)))}return Object(j.jsx)("div",{children:Object(j.jsxs)("form",{className:"form-stars",onSubmit:function(e){e.preventDefault();var n=r.name,c=r.comment;N.a.post("http://localhost:5005/api/suggestions",{name:n,comment:c,user:t._id}).then(o(a)).catch((function(e){return console.log(e)}))},children:[Object(j.jsx)("label",{children:"Name:"}),Object(j.jsx)("input",{type:"text",name:"name",value:r.name,onChange:function(e){return u(e)}}),Object(j.jsx)("label",{children:"Make a suggestion:"}),Object(j.jsx)("textarea",{name:"comment",value:r.comment,onChange:function(e){return u(e)}}),Object(j.jsx)("input",{className:"form-btn",type:"submit",value:"Submit"})]})})},z=a(38);Object(z.a)("user_hj8Hoq7YyGBLaIMwhkoP4");var B=function(e){return Object(j.jsx)("footer",{})};var J=function(e){var t=e.dailyPic,a=e.setSelectedPic,n=e.latestPicsList,c=e.user;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"header-div",children:Object(j.jsx)(D,{data:t,user:c})}),Object(j.jsx)("div",{className:"gallery-container",children:Object(j.jsx)(R,{data:n,setSelectedPic:a,user:c})}),c&&Object(j.jsx)(W,{user:c}),Object(j.jsx)(B,{})]})};a(79);var X=function(e){var t=Object(n.useState)({username:"",email:"",password:""}),a=Object(l.a)(t,2),c=a[0],s=a[1],r=function(e){var t=e.target,a=t.name,n=t.value;s(Object(i.a)(Object(i.a)({},c),{},Object(U.a)({},a,n)))};return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"Sign Up"}),Object(j.jsxs)("form",{onSubmit:function(t){t.preventDefault(),function(e){return w.post("/signup",e).then(y).catch(S)}({username:c.username,password:c.password,email:c.email}).then((function(t){console.log(t),t.data?(localStorage.setItem(x,t.data.accessToken),e.authenticate(t.data.user),e.history.push("/")):console.log("error")}))},className:"auth__form",children:[Object(j.jsx)("label",{htmlFor:"input-username",children:"Username"}),Object(j.jsx)("input",{id:"input-username",type:"text",name:"username",placeholder:"Username",value:c.username,onChange:r,required:!0}),Object(j.jsx)("label",{htmlFor:"input-username",children:"Email"}),Object(j.jsx)("input",{id:"input-email",type:"text",name:"email",placeholder:"Your Email",value:c.email,onChange:r,required:!0}),Object(j.jsx)("label",{htmlFor:"input-password",children:"Password"}),Object(j.jsx)("input",{id:"input-password",type:"password",name:"password",placeholder:"Password",value:c.password,onChange:r,required:!0,minLength:"8"}),Object(j.jsx)("button",{className:"form-btn",type:"submit",children:"Submit"})]})]})};var Z=function(e){var t=e.authenticate,a=Object(n.useState)({username:"",password:""}),c=Object(l.a)(a,2),s=c[0],r=c[1],o=function(e){var t=e.target,a=t.name,n=t.value;r(Object(i.a)(Object(i.a)({},s),{},Object(U.a)({},a,n)))};return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"Log In"}),Object(j.jsxs)("form",{onSubmit:function(a){a.preventDefault(),function(e){return w.post("/login",e).then(y).catch(S)}({username:s.username,password:s.password}).then((function(a){a.data?(localStorage.setItem(x,a.data.accessToken),t(a.data.user),e.history.push("/")):console.log("error")}))},className:"signup__form",children:[Object(j.jsx)("label",{htmlFor:"input-username",children:"Username"}),Object(j.jsx)("input",{id:"input-username",type:"text",name:"username",placeholder:"Username",value:s.username,onChange:o,required:!0}),Object(j.jsx)("label",{htmlFor:"input-password",children:"Password"}),Object(j.jsx)("input",{id:"input-password",type:"password",name:"password",placeholder:"Password",value:s.password,onChange:o,required:!0,minLength:"8"}),Object(j.jsx)("button",{className:"form-btn",type:"submit",children:"Submit"})]})]})},K=function(){return Object(j.jsx)("div",{children:Object(j.jsx)("h1",{children:"This page is hyper protected!"})})};function Q(e){console.log(e,"linea 9, myconstellation");var t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],s=a[1],r=Object(n.useState)([]),i=Object(l.a)(r,2),o=(i[0],i[1],e.setSelectedPic),u=null;function d(){(function(e){return T.get("/".concat(e)).then(F).catch(_)})(u).then((function(e){var t=e.data;s(t)}))}function b(e){(function(e,t){return T.delete("/".concat(e,"/").concat(t)).then(F).catch(_)})(u,e).then((function(e){return d()}))}return e.user&&(u=e.user._id),Object(n.useEffect)((function(){d()}),[]),Object(j.jsx)("div",{children:c.map((function(e){return Object(j.jsxs)("div",{children:[Object(j.jsx)("img",{src:e.hdurl,alt:"card-detail-img"}),Object(j.jsx)("div",{className:"detail-title",children:Object(j.jsx)("p",{className:"detail-title",children:e.title})}),Object(j.jsx)("div",{className:"detail-line-1",children:Object(j.jsxs)("p",{className:"detail-explanation",children:[e.explanation," "]})}),Object(j.jsx)("div",{className:"detail-line-2",children:Object(j.jsx)("p",{className:"detail-tagline",children:e.date})}),Object(j.jsx)(k.b,{to:"/details",onClick:function(){return o(e)},children:Object(j.jsx)("p",{children:"See details"})}),Object(j.jsx)("button",{onClick:function(){return b(e.date)},children:"Delete"})]},e.url)}))})}var V=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)({}),r=Object(l.a)(s,2),u=r[0],d=r[1],h=Object(n.useState)([]),m=Object(l.a)(h,2),f=m[0],v=m[1],g=Object(n.useState)({}),k=Object(l.a)(g,2),P=k[0],L=k[1];Object(n.useEffect)((function(){N.a.get("https://api.nasa.gov/planetary/apod?api_key=4nNodO7eptWEC8F8NiG9XcA3x5A4AYqADrniZGFu").then((function(e){d(e.data)}))}),[]),Object(n.useEffect)((function(){N.a.get("https://api.nasa.gov/planetary/apod?api_key=4nNodO7eptWEC8F8NiG9XcA3x5A4AYqADrniZGFu&count=50").then((function(e){v(e.data)}))}),[]),Object(n.useEffect)((function(){var e=localStorage.getItem(x);e||c(null),w.get("/session",{headers:{Authorization:localStorage.getItem(x)}}).then(y).catch(S).then((function(e){e.data?c(e.data.user):(console.log("RES IN CASE OF FAILURE",e),c(null))}))}),[]);var A=function(e){c(e)};return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(C,{handleLogout:function(){var e=localStorage.getItem(x);e||c(null),w.delete("/logout",{headers:{Authorization:localStorage.getItem(x)}}).then(y).catch(S).then((function(e){e.status||console.error("\ud83d\udca1 SOMETHING HAPPENED THAT HAS TO DEALT WITH",e),localStorage.removeItem(x),c(null)}))},user:a}),Object(j.jsx)(p.a,{})," \u200b",Object(j.jsxs)(o.d,{children:[Object(j.jsx)(O,{exact:!0,path:"/myconstellation",component:Q,user:a,setSelectedPic:L,selectedPic:P}),Object(j.jsx)(o.b,{exact:!0,path:"/details",render:function(e){return Object(j.jsx)(H,Object(i.a)(Object(i.a)({},e),{},{data:P,user:a}))}}),Object(j.jsx)(b,{exact:!0,path:"/daily-details",component:E,data:u}),Object(j.jsx)(b,{exact:!0,path:"/",component:J,dailyPic:u,setSelectedPic:L,latestPicsList:f,user:a}),Object(j.jsx)(b,{exact:!0,path:"/auth/signup",authenticate:A,component:X}),Object(j.jsx)(b,{exact:!0,path:"/auth/login",authenticate:A,component:Z}),Object(j.jsx)(O,{exact:!0,path:"/protected",component:K,user:a})]})]})};r.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(k.a,{children:Object(j.jsx)(V,{})})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.fa9669db.chunk.js.map